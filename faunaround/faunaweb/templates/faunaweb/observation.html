{% extends 'base.html' %}
{% load static %}
{% block title %}{{ block.super }}{% endblock title %}
{% block content %}
<h1>Observations</h1>
{% if observation_list %}
{% include 'faunaweb/includes/search.html' %}
{% include 'faunaweb/includes/paginator_next.html' %}
<h3>All observers already spotted {{ species_count }} of {{ total_species_count }} species</h3>
<table class="observation-table">
    <tr>
        <th>Date</th>
        <th>Class</th>
        <th>Species</th>
        <th>Count</th>
        <th>Place</th>
        <th>Observer</th>
        <th>Photo</th>
    </tr>
    {% for observation in observation_list %}
        <tr>
            <td>{{ observation.date }}</td>
            <td>{{ observation.species.class_id.class_national }} ({{ observation.species.class_id.class_scientific }})</td>
            <td><a href="{% url 'species_detail' observation.species.pk %}">{{ observation.species.species_national }} ({{ observation.species.species_scientific }})</a></td>
            <td>{{ observation.count }}</td>
            <td>{{ observation.place }}</td>
            <td>
                {% if observation.observer.first_name and observation.observer.last_name %}
                    {{ observation.observer.first_name }} {{ observation.observer.last_name }}
                {% else %}
                    {{ observation.observer }}
                {% endif %}
            </td>
            <td>
                {% if observation.photo %}
                <img src="{{ observation.photo.url }}" class="observation-img">
                {% else %}
                <p>No image uploaded</p>
                {% endif %}
            </td>
        </tr>
    {% endfor %}
</table>
<div class="total-entries">Total entries: {{ entries_count }}</div>
{% else %}
    <p>No observations yet</p>
{% endif %}
{% endblock content %}